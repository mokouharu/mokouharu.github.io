[{"title":"es6初学习","date":"2017-03-03T06:25:43.000Z","path":"2017/03/03/es6初学习/","text":"ECMAScript 6.0 let/const 模板字面量 箭头函数 参数默认值 for…of [slide style=”background-color:#000”] 变量声明let/const let 类似var ，允许变量作用域控制在块级里面 const 创建值不能被改变的变量(常量) [slide style=”background-color:#000”] 块级作用域 12345678910111213141516171819202122function cal (flag) &#123; var m = 0; if (flag) &#123; var m = 1; &#125; &#123; var m = 10; &#125; return m;&#125;console.log(cal(true)); //100 12345678910111213141516171819202122function cal (flag) &#123; var m = 0; if (flag) &#123; let m = 1; &#125; &#123; let m = 10; &#125; return m;&#125;console.log(cal(true)); //0 [slide style=”background-color:#000”] 1234567891011121314var a = [];for (var i = 0; i &lt; 5; i++) &#123; a[i] = function () &#123; console.log(i); &#125;;&#125;a[2](); // 5 1234567891011121314var a = [];for (let i = 0; i &lt; 5; i++) &#123; a[i] = function () &#123; console.log(i); &#125;;&#125;a[2](); // 2 [slide style=”background-color:#000”] 不存在变量提升 123456789101112131415var tmp = &apos;0101&apos;;if (true) &#123; tmp = &apos;234&apos;; let tmp; console.log(&apos;tmp:&apos;+tmp);&#125; [slide style=”background-color:#000”] 不允许重复声明 12345678910111213141516function () &#123; let a = 10; let a = 1; // 报错&#125;function () &#123; let a = 10; &#123;let a = 1;&#125; //不报错&#125; [slide style=”background-color:#000”] 模板字面量 反引号（`）标识 可以当作普通字符串使用，也可以用来定义多行字符串，或在字符串中嵌入变量 1234567891011121314151617181920212223242526var first = &apos;meimei&apos;,last=&apos;han&apos;;// 普通字符串`this is template string.`// 多行字符串var name = &apos;hello are you,&apos;+ &apos;my firstname is&apos;+ first;// es6var name = `hello are you, my firstname is $&#123;first&#125;;// 字符串中嵌入变量var name = &apos;Your name is &apos; + first + &apos; &apos; + last + &apos;.&apos;;//es6var name = `Your name is $&#123;first&#125; $&#123;last&#125;. `; [slide style=”background-color:#000”] tagged template 标签模板 函数调用的一种特殊形式 紧跟在函数名后面的模板字符串是函数的参数 123456console.log`abc`// 等同于console.log(abc) [slide style=”background-color:#000”] 参数默认值 JavaScript有严格的默认参数格式，未被传值的参数默认为undefined es6允许指定任意参数的默认值 1234567891011121314function cal(name='LiLei', age='18') &#123; return `Hello,My name is $&#123;name&#125; and i'm $&#123;age&#125;!`;&#125;cal(); // Hello,My name is LiLei and i'm 18!cal(\"HanMei\"); // Hello,My name is HanMei and i'm 18!cal(undefined, \"48\"); // Hello,My name is LiLei and i'm 48!cal(\"HanMei\", \"48\"); // Hello,My name is HanMei and i'm 48! [slide style=”background-color:#000”] 扩展运算符 … 将一个数组转换为用逗号分隔的参数序列，主要用于函数调用 类似数组的对象/数值转换为数组 [slide style=”background-color:#000”] 代替apply 123456789101112var arr1 = ['a', 'b'];var arr2 = ['c', 'd'];//esarr1.push.apply(arr1, arr2);// es6arr1.push(...arr2) 1234567891011[...8]// [0, 1, 2, 3, 4, 5,6,7,8][...\"ECMAscript\"]// [ \"E\", \"C\", \"M\", \"A\", \"s\",\"c\",\"r\",\"i\",\"p\",\"t\" ] [slide style=”background-color:#000”] 箭头函数 简短的仅返回表达式值的回调函数 多个参数用圆括号表示 多个语句表达式，用花括号表示 不改变 this 指向 [slide style=”background-color:#000”] 123456789101112131415161718192021222324252627//一个参数var f = function (x) &#123; return x * x;&#125;//es6var f = x =&gt; x*x;//多个参数var f = function (x,y) &#123; return x * x + y*y;&#125;//es6var f = (x,y) =&gt; x*x + y*y; [slide style=”background-color:#000”] 123456789101112131415161718192021222324252627282930//多条语句var f = function (x)&#123; if (x &gt; 0) &#123; return x * x; &#125;else &#123; return - x * x; &#125;&#125;//es6var f = x =&gt; &#123;if (x &gt; 0) &#123; return x * x; &#125;else &#123; return - x * x; &#125;&#125; [slide style=”background-color:#000”] this总是指向外层调用者对象 1234567891011121314151617181920212223242526//es5下var obj = &#123; time: 60*60*1000, get: function () &#123; var b = this.time; console.log(&apos;b:&apos;+b); var fn = function () &#123; return new Date().getTime() + this.time; &#125;; return fn(); &#125;&#125;;obj.get(); [slide style=”background-color:#000”] 12345678910111213141516171819202122//箭头函数var obj = &#123; time: 60*60*1000, get: function () &#123; var b = this.time; console.log(&apos;b:&apos;+b); var fn = () =&gt; new Date().getTime() + this.time; return fn(); &#125;&#125;;obj.get(); [slide style=”background-color:#000”] for…of 使用的范围：数组、类似数组的对象（普通对象不能直接使用）以及字符串等 可以访问元素的索引和值 使用break语句 跳出循环 [slide style=”background-color:#000”] 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748var arr = ['a', 'b', 'c'];//for循环for (var idx = 0; idx &lt; arr.length; idx++) &#123; console.log(arr[idx]);&#125;//forEacharr.forEach(function (ele) &#123; console.log(ele);&#125;);//for...offor (let elem of arr) &#123; console.log(elem);&#125;//遍历元素的索引和值 //entries() 返回一个遍历器对象，用来遍历[键名, 键值]组成的数组for (let [key,val] of arr.entries()) &#123; console.log(`$&#123;key&#125;:$&#123;val&#125;`);&#125;//break跳出for (let n of arr) &#123; if (n &lt; 1) break; console.log(n);&#125; [slide style=”background-color:#000”] 其他特性 解构赋值 promise Classes（类） Modules（模块） reference es6 入门 深入浅出es6 Babel","tags":[]},{"title":"css实现阴影","date":"2017-03-03T06:20:14.000Z","path":"2017/03/03/css实现阴影/","text":"阴影1box-shadow: 3px 3px 6px -3px black; 偏移量x 模糊半径 扩张半径 颜色值 单侧、双侧阴影栗子 不规则阴影drop-shadow 染色效果 滤镜模式1filter: sepia() saturate() hue-rotate(); Speia滤镜 是对图片或元素整体进行棕褐色处理，就是老照片那种效果，默认值100%saturat 是用来改变图片的饱和度，默认值100%hue-rotate 用来改变图片的色相 默认值0deg 色调模型HSL H：Hue(色调)。0(或360)表示红色，120表示绿色，240 表示蓝色，也可取其他数值来指定颜色。取值为：0 - 360 S：Saturation(饱和度)。取值为：0.0% - 100.0% L：Lightness(亮度)。取值为：0.0% - 100.0% 路飞 混合模式1background-blend-mode: luminosity; 另一个路飞 毛玻璃效果伪元素的作用 折角效果 45°折角1background-image: linear-gradient( [ &lt;angle&gt; | &lt;side-or-corner&gt; ,]? &lt;color-stop&gt; [, &lt;color-stop&gt;]+ ); 45度折角 不规则折角 伪元素位移 transform旋转 rotate1transform: translateY() rotate(); 不规则折角","tags":[]},{"title":"http小认知","date":"2017-03-03T06:05:04.000Z","path":"2017/03/03/https小认知/","text":"当我们在地址栏输入url时，可以看到web页面，它是如何进行通信的？ HTTP/1.1 HyperText Transfer protocol 超文本传输协议 由W3和IEIF共同推动和发布了普遍使用的版本——http1.1 从服务器端传输超文本到客户端的传送协议规范 应用层协议 #####看完书和度娘提供的资料，零散的小碎片大致可以拼接成如下的导图： URL与URI URL：uniform resource location 统一资源定位符 ，是定位资源位置的一种抽象的识别方法。URI：uniform resource identifier 统一资源标识符，是简洁的描述从Internet得到的资源的位置和访问方法。 URI是用字符串标识某一Internet资源;URL是URI的子集，是一种特殊的资源标识URI，它可以指明如何定位到某个资源。 属性 描述 hash 设置或返回从#开始的URL host 设置或返回主机名和端口号 hostname 设置或返回当前URL的主机名 href 设置或返回完整的URL pathname 设置或返回路径 port 设置或返回当前URL的端口号 protocol 设置或返回协议规则 search 设置或返回从？开始的查询部分 DNS Domain Name System 域名解析服务 RFC reqeust for comments 征求修正意见书素有网络知识圣经之称，规定了网络中协议的基本内容。 无状态、无连接1234567小明（客户端）转了500块钱（发送信息）给老王（服务器）老王荷包鼓了，小明看见了，扭头回家闭个眼（断开连接），睁开眼小明又转了500块钱给老王，老王欣然接受了闭个眼，睁开眼 循环往复……小明去捡破烂了，老王去了迪拜小明和老王都不记得之前两人之间的交易（通信信息） http协议对客户端和服务器的通信状态不做保存，没有历史记录。每次连接只处理一个请求，处理完后断开连接。 持久化管道化 报文结构 request报文 报文首部（请求行与首部字段）、空行、报文主体 1.请求行 | 报文类型 | URI | 协议版本 | 可选内容1GET m.58.com HTTP/1.1 方法 描述 描述 GET 请求获取Request-URI所标识的资源 请求获取Request-URI所标识的资源 POST 在标识的资源后附加新的数据 PUT 请求服务器存储一个资源 HEAD 请求获取所标识的资源的响应消息报头 DELETE 请求服务器删除一个资源 OPTIONS 请求查询与资源相关的选项和需求 TRACE 请求服务器回送收到的请求信息，主要用于测试或诊断 CONNECT 保留以后使用 2.首部字段 require报文 报文首部（状态行与首部字段）、空行、报文主体 1.状态行 | 状态码 | 原因短语 | 协议版本 | 可选内容1HTTP/1.1 200 ok 常见的响应状态码 2.首部字段 另：HTTP/1.1 规范了47种首部字段，除了以上请求和响应的首部字段，还有通用首部字段、实体首部字段 Content-Encoding 内容编码机制123浏览器发送请求时，通过 Accept-Encoding带上自己支持的内容编码格式列表服务端挑选一种用来对正文进行编码，Content-Encoding指明选定的格式浏览器获取响应正文后，依据 Content-Encoding 进行解压 内容编码针对的只是传输正文。首部始终是以 ASCII文本传输，没有经过任何压缩。 内容编码格式：gzip 和 deflate https://imququ.com/post/content-encoding-header-in-http.html 小栗子来了 http://m.58.com/bj/sale.shtml 缺点 一条连接上只可发送一个请求；请求只能由客户端发出，客户端不可以接收除响应以外的指令；请求/响应首部未经压缩就发送，首部信息越多延迟越大；发送冗长的首部，每次互相发送相同的首部造成的浪费较多；可任意选择数据压缩格式，非强制压缩发送。 通信使用明文（不加密），内容可能会被窃听；不验证通信方的身份，因此有可能遭遇伪装；无法证明报文的完整性，所以有可能遭遇篡改。 物竞天择，HTTP/2.0、HTTPS应运而生","tags":[]},{"title":"SDK实现原理","date":"2017-02-22T07:37:32.000Z","path":"2017/02/22/SDK实现原理/","text":"[slide style=”background-color:#000”] ZZJSSDKmokouharu[slide style=”background-color:#000”] WHY ios端和andr端接口统一 传参更灵活 接受回调 [slide style=”background-color:#000”] HOW基本调用方式 外链文件 1234&lt;script src='https://j2.58cdn.com.cn/zhuanzhuan/libs/zzapp/zzapp.min.js'&gt;&lt;script type=\"text/javascript\"&gt; ZZAPP.setTitle(&#123;title:'转转FE'&#125;)；&lt;/script&gt; npm 依赖 123456789101112131415//package.json \"dependencies\": &#123; \"zz-jssdk\": \"0.1.1\" &#125;, //A.vue &lt;script type=\"text/javascript\"&gt; import ZZAPP from 'zz-jssdk' ... export default &#123; methods:&#123; setTitle(value)&#123; ZZAPP.setTitle(&#123;title:value&#125;) &#125; &#125; &lt;/script&gt; [slide style=”background-color:#000”] 简单的实现流程 [slide style=”background-color:#000”] 获取环境变量 123456789101112131415//ios/andriod navigator.userAgent // zzversion 1.匹配url中的zzv（在转转内，native会自动在url后面加上zzv和_tt参数） location.href.match(/zzv=([^&amp;|#]*)/); 2.从cookie中获取v或者zzv的值，并取最大值 // 新旧webview IOS:转转2.2.0版本以上都是新webview Andriod: 移步邮件 [slide style=”background-color:#000”] 所遇问题登录 ios调起登录写入cookie不及时 某些版本，andriod登录无回调，会调不起登录 1234//解决方法 1. sdk中会做兼容处理，在ios调起登录时，会再次主动获取下cookie，写入页面 ** 直接调用 ZZAPP.login((res)=&gt;&#123;&#125;) ** 2. 后期ios端会想办法处理，比如把cookie写入请求的header头里 [slide style=”background-color:#000”] 分享 右上角分享按钮，不执行回调（客户端已解决） 调起分享面板后，点击取消或蒙层，没有回调 调起分享面板，ios端只支持四种参数组合，若少参数，会调起失败 http://api.eig.58corp.com/ [slide style=”background-color:#000”] andriod端的新旧webview问题 新版webview : url中必须加webview=zzn 客户端会根据webview=zzn提供新容器，SDK中根据webview=zzn来调用新对象 [slide style=”background-color:#000”] 头部两个接口不能同时调用 标题、分享、搜索、发布等接口调用，需要加一个延时（如10ms,20ms等） [slide style=”background-color:#000”] 调试 线上包： 12345//- 调用接口，如果ios可以，andr不行，先检查url里是否加了webview=zzn- 可以在pc端模拟，看传参是否正确，版本号要加上- 引入firebug // &lt;script type=\"text/javascript\" src=\"//getfirebug.com/firebug-lite-debug.js\"&gt;&lt;/script&gt;;- chrome inspect(耸岩) : http://blog.csdn.net/zhulin2609/article/details/51437821 测试包: 123// - 除了以上调试方向外，可以换线上包试一下，如果线上包没问题，讲道理的话，可以怀疑是客户端代码问题 - 客户端的开发模式调试 ----- [slide style=”background-color:#000”] 相关文档 接口文档：http://zzfe.58corp.com/doc/jssdk/global.html 外链文件地址 压缩版：http://j2.58cdn.com.cn/zhuanzhuan/libs/zzapp/zzapp.min.js 未压缩版：http://j2.58cdn.com.cn/zhuanzhuan/libs/zzapp/zzapp.js 衍生版：http://j2.58cdn.com.cn/zhuanzhuan/libs/zzapp/zzapp-0.0.2.js npm 私服 地址：http://zzfe.58corp.com/npm/ 12//npm 安装依赖 $ npm install zz-jssdk","tags":[]},{"title":"Hello World","date":"2017-02-22T07:34:24.000Z","path":"2017/02/22/hello-world/","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new \"My New Post\" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","tags":[]}]