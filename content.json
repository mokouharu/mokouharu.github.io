[{"title":"list-one","date":"2017-02-22T07:37:32.000Z","path":"2017/02/22/list-one/","text":"[slide style=”background-color:#000”] ZZJSSDKmokouharu[slide style=”background-color:#000”] WHY ios端和andr端接口统一 传参更灵活 接受回调 [slide style=”background-color:#000”] HOW基本调用方式 外链文件 1234&lt;script src='https://j2.58cdn.com.cn/zhuanzhuan/libs/zzapp/zzapp.min.js'&gt;&lt;script type=\"text/javascript\"&gt; ZZAPP.setTitle(&#123;title:'转转FE'&#125;)；&lt;/script&gt; npm 依赖 123456789101112131415//package.json \"dependencies\": &#123; \"zz-jssdk\": \"0.1.1\" &#125;, //A.vue &lt;script type=\"text/javascript\"&gt; import ZZAPP from 'zz-jssdk' ... export default &#123; methods:&#123; setTitle(value)&#123; ZZAPP.setTitle(&#123;title:value&#125;) &#125; &#125; &lt;/script&gt; [slide style=”background-color:#000”] 简单的实现流程 [slide style=”background-color:#000”] 获取环境变量 123456789101112131415//ios/andriod navigator.userAgent // zzversion 1.匹配url中的zzv（在转转内，native会自动在url后面加上zzv和_tt参数） location.href.match(/zzv=([^&amp;|#]*)/); 2.从cookie中获取v或者zzv的值，并取最大值 // 新旧webview IOS:转转2.2.0版本以上都是新webview Andriod: 移步邮件 [slide style=”background-color:#000”] 所遇问题登录 ios调起登录写入cookie不及时 某些版本，andriod登录无回调，会调不起登录 1234//解决方法 1. sdk中会做兼容处理，在ios调起登录时，会再次主动获取下cookie，写入页面 ** 直接调用 ZZAPP.login((res)=&gt;&#123;&#125;) ** 2. 后期ios端会想办法处理，比如把cookie写入请求的header头里 [slide style=”background-color:#000”] 分享 右上角分享按钮，不执行回调（客户端已解决） 调起分享面板后，点击取消或蒙层，没有回调 调起分享面板，ios端只支持四种参数组合，若少参数，会调起失败 http://api.eig.58corp.com/ [slide style=”background-color:#000”] andriod端的新旧webview问题 新版webview : url中必须加webview=zzn 客户端会根据webview=zzn提供新容器，SDK中根据webview=zzn来调用新对象 [slide style=”background-color:#000”] 头部两个接口不能同时调用 标题、分享、搜索、发布等接口调用，需要加一个延时（如10ms,20ms等） [slide style=”background-color:#000”] 调试 线上包： 12345//- 调用接口，如果ios可以，andr不行，先检查url里是否加了webview=zzn- 可以在pc端模拟，看传参是否正确，版本号要加上- 引入firebug // &lt;script type=\"text/javascript\" src=\"//getfirebug.com/firebug-lite-debug.js\"&gt;&lt;/script&gt;;- chrome inspect(耸岩) : http://blog.csdn.net/zhulin2609/article/details/51437821 测试包: 123// - 除了以上调试方向外，可以换线上包试一下，如果线上包没问题，讲道理的话，可以怀疑是客户端代码问题 - 客户端的开发模式调试 ----- [slide style=”background-color:#000”] 相关文档 接口文档：http://zzfe.58corp.com/doc/jssdk/global.html 外链文件地址 压缩版：http://j2.58cdn.com.cn/zhuanzhuan/libs/zzapp/zzapp.min.js 未压缩版：http://j2.58cdn.com.cn/zhuanzhuan/libs/zzapp/zzapp.js 衍生版：http://j2.58cdn.com.cn/zhuanzhuan/libs/zzapp/zzapp-0.0.2.js npm 私服 地址：http://zzfe.58corp.com/npm/ 12//npm 安装依赖 $ npm install zz-jssdk","tags":[]},{"title":"Hello World","date":"2017-02-22T07:34:24.000Z","path":"2017/02/22/hello-world/","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new \"My New Post\" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","tags":[]}]